<!-- Controlled by EditCtrl (in editController.js)  -->
<div class="row">
  <!-- Edit -->
  <div class="col-md-12 col-xs-12">
    <h5>
      <span>
        Project: <select ng-model="currentProject" ng-show="projects.length > 1"
          ng-options="item.name for item in projects"
          ng-change="setProject(currentProject);"></select>
        <span ng-show="projects.length == 1">{{currentProject.name}}</span>
      </span>
      <span>
        &nbsp;&nbsp;Role: <select ng-model="projectRole" ng-show="roleOptions.length > 1"
                ng-options="item for item in roleOptions"></select>
        <span ng-show="roleOptions.length == 1">{{projectRole}}</span>
      </span>
    </h5>
  </div>
<!-- R1 -->
<div class="row">
  <!-- R1C1 -->
  <div class="col-md-6 col-xs-12">

    <div>
      <uib-pagination items-per-page="pageSize" max-size="5"
        boundary-links="true" class="pagination-sm" previous-text="&lsaquo;"
        next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"
        ng-show="worklists.totalCount > visibleSize || paging['worklist'].filter"
        total-items="worklists.totalCount" ng-model="paging['worklist'].page"
        ng-change="getWorklists()"></uib-pagination>

      <!-- Mobile friendly line-break -->
      <span class="visible-xs">
        <br class="visible-xs-inline" />
      </span>

      <input class="input-filter" placeholder="Search"
        ng-show="worklists.totalCount > visibleSize || paging['worklist'].filter"
        type="text" ng-model="paging['worklist'].filter"
        ng-model-options="{ debounce: 300 }" ng-change="getWorklists()"
        title="{{paging['worklist'].filter}}" list="filter{{value}}">
      <datalist id="filter{{value}}">
        <option ng-repeat="filter in filters | orderBy:'key'"
          value="{{filter.key}}:{{filter.value}}">{{filter.value}}</option>
      </datalist>

      <button class="btn btn-xs btn-warning" ng-show="paging['worklist'].filter"
        ng-click="paging['worklist'].filter = ''; getWorklists()"
        title="Click to clear filter text">Clear</button>

      <!-- No need to show for BETA, there should be only one -->
      <button type="button" class="btn btn-xs btn-primary"
        ng-show="worklists.totalCount > 0 && (value == 'RELEASE' || value == 'PUBLISHED')"
        ng-model="showLatest" ng-change="getWorklists()" uib-btn-checkbox
        btn-checkbox-true="true" btn-checkbox-false="false">
        <span ng-show="showLatest" title="Click to show all">Latest</span>
        <span ng-hide="showLatest" title="Click to show only most recent">All</span>
      </button>

    </div>
    <!-- Basic Worklist info -->
    <span ng-show="worklists.totalCount == 0" style="display: block;"
      class="alert alert-warning">No worklists.</span>
    <table ng-show="worklists.totalCount > 0" class="table">
      <thead class="table-select-row">
        <tr>
          
          <!-- Worklist name header -->
          <th class="col-md-5 col-xs-5">Name / Last Modified</th>

          <!-- Author/Reviewer Time header -->
          <th ng-show="value == 'Worklist'" class="col-md-3 col-xs-3">
              Editor
            / <span title="Team">Team
            </span> / <span title="Time">Time
            </span></th>

          <!-- Workflow Status header -->
          <th ng-show="value == 'Worklist'" class="col-md-2 col-xs-2">
              Status</th>

          <!-- Actions header -->
          <th class="col-md-2 col-xs-2" ">Actions</th>

        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="worklist in worklists" ng-click="selectWorklist(worklist);"
          ng-class="{selected: worklist.id == selected.worklist.id}">
          
          <td>
            {{worklist.name}}
            <span>
              <br />{{toDate(worklist.lastModified)}}
            </span>
          </td>

          <td ng-show="value == 'Worklist'">
            <span style="word-break: break-word;"> {{joinEditors(worklist)}}</span> <br/>
            <span> {{worklist.team}} </span> <br/>
            <span> {{toTime(worklist.authorTime)}} </span>
          </td>

          <td ng-show="value == 'Worklist'" >
            {{worklist.workflowStatus}}
          </td>

          <!--  actions -->
          <td class="nobreak">
            <i title="Remove" ng-show="!worklist.staged"
              confirm="Are you sure you want to remove the worklist ({{worklist.name}})?"
              ng-click="removeWorklist(worklist); $event.stopPropagation()"
              class="noul material-icons md-18">delete</i>

            <i  ng-show="value == 'Worklist' && joinEditors(worklist).length == 0"
              ng-click="openAssignWorklistModal(worklist,'ASSIGN'); $event.stopPropagation()"
              title="Assign" class="noul material-icons md-18">assignment_ind</i>

            <i  ng-show="value == 'Worklist' && joinEditors(worklist).length > 0"
              ng-click="unassignWorklist(worklist); $event.stopPropagation()"
              title="Unassign" class="noul material-icons md-18">assignment_return</i>
              
          </td>
        </tr>
      </tbody>
    </table>
    <!-- End R1C1 -->
  </div>
</div>